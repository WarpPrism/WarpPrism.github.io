<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="keywords" content="周吉昊, ZhouJihao, zhoujihao, blog, jihao'sblog, 前端开发, 个人博客"/>
    <meta name="description" content="<p>数字图像处理的第一次作业就是用图像的插值算法实现图片的放缩，在网上查了一些资料后，总结如下：</p>

"/>
    <link rel="shortcut icon" href="/favicon.ico"/>
    <!--Bootstrap And Octicons-->
    <link rel="stylesheet" href="/lib/bootstrap-3.3.5-dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="/lib/octicons/octicons.css" />
    <link rel="stylesheet" type="text/css" href="/lib/animate.css" />

    
        <link rel="stylesheet" href="/build/css/site_base.css"/>
        
            <link rel="stylesheet" href="/build/css/highlight.css"/>
        
            <link rel="stylesheet" href="/build/css/post.css"/>
        
        <!--Google Analysis-->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-79596803-1', 'auto');
          ga('send', 'pageview');
        </script>
    
    <title>关于图像处理中的插值算法（Matlab语言描述）</title>
</head>

<body>
	<div class="container-fluid" id="site-wrapper">
		<div class="container-fluid">
  <div class="row">
    <div id="index-header">
      <h1 class="animated flipInX">
        <img id="logo" src="/build/imgs/logo.png" alt=""/>
        <span id="site-name">Jihao's Blog</span>
      </h1>
      <h4 id="motto"><span><b>Never let it go</b></span></h4>
    </div>
  </div>
  <div class="row" id="index-nav">
    <ul>
      <li>
        <a href="/">
          <span class="glyphicon glyphicon-home" aria-hidden="true"></span>
          &nbsp;&nbsp;Home
        </a>
      </li>
      <li>
        <a href="/pages/tech-notes.html">
          <span class="glyphicon glyphicon-ice-lolly-tasted" aria-hidden="true"></span>
          &nbsp;&nbsp;Tech Posts
        </a>
      </li>
      <li>
        <a href="/pages/essay.html">
          <span class="glyphicon glyphicon-file" aria-hidden="true"></span>
          &nbsp;&nbsp;Essay
        </a>
      </li>
      <li>
        <a href="/pages/about.html">
          <span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>
          &nbsp;&nbsp;About
        </a>
      </li>
    </ul>
    <span id="nav-indicator"></span>
  </div>
</div>

		<div class="row" id="post-wrapper">
  <div id="post-body">
    <div class="post">
      <div class="header">
        <h2>关于图像处理中的插值算法（Matlab语言描述）</h2>
        <p class="post-meta">
          <span class="octicon octicon-clock"></span>
            Oct 18, 2015
            
            
        </p>
        <div class="post-tag">
          <div>
            
            <a href="javascript:void(0)">
              <span class="octicon octicon-list-unordered"></span>
              tech-post
            </a>
            
          </div>
          <div>
            
            <a href="javascript:void(0)">
              <span class="octicon octicon-tag"></span>
              数字图像处理
            </a>
            
          </div>
        </div>
      </div>
      <hr class="boundary">
      <article>
        <p>数字图像处理的第一次作业就是用图像的插值算法实现图片的放缩，在网上查了一些资料后，总结如下：</p>

<p>首先我们定义几个变量：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>- 原图矩阵: Source
- 目标图矩阵: Destination
- 宽度缩放比: ratioW
- 高度缩放比: ratioH
</code></pre>
</div>

<p>先得到原图的宽和高</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Source = imread('src.png');
[srcM, srcN] = size(Source);
</code></pre>
</div>

<p>接着根据下面的公式计算出目标图的宽和高：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ratioW = dstM / srcM;
ratioH = dstN / srcN;
</code></pre>
</div>

<p>新建目标图，根据目标图的大小建立一个空的Matrix，记作M</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Destination = zeros(dstM, dstN);
M = Destination;
</code></pre>
</div>

<p>然后要对M中的每个点赋值，即所谓的<strong>插值运算</strong>，这个值从哪里来呢？当然是原图。</p>

<p>现在 设M矩阵的坐标点为(dx, dy)，则它对应的原图坐标(sx, sy)满足：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>dx / sx = dstM / srcM;
dy / sy = dstN / srcN;
</code></pre>
</div>

<p>这样我们就能求出</p>

<div class="highlighter-rouge"><pre class="highlight"><code>(sx, sy) = (dx * srcM / dstM, dy * srcN / dstN);
</code></pre>
</div>
<p>到此，我们就把目标图中的坐标点映射到原图中去了</p>

<p>但是这个坐标点不一定是整数，假如(2, 0) 映射的结果为 (0.75, 0)，这显然是不科学的，怎么办呢？<br />
第一种方法，<strong>四舍五入</strong> 得到 (1, 0)，然后把原图中(1, 0)点的像素值赋给目标图的(2, 0)位置即可：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>fd(2, 0) = fs(1, 0);
</code></pre>
</div>
<p>这种放大图像的方法就叫做 <strong>最临近插值算法</strong>，这是一种最基本、最简单的图像缩放算法，效果也是最不好的，放大后的图像有很严重的马赛克，缩小后的图像有很严重的失真。</p>

<p>另一种算法就是<strong>双线性插值算法</strong>，它的失真情况会好很多。</p>

<p>算法思路是：<br />
对于一个目的像素，映射后得到的浮点坐标为(i+u,j+v)，<br />
(其中i、j均为浮点坐标的整数部分，u、v为浮点坐标的小数部分，是取值[0,1)区间的浮点数)，则这个像素得值 f(dx,dy) 可由原图像中坐标为 (i,j)、(i+1,j)、(i,j+1)、(i+1,j+1)所对应的周围四个像素的值决定，即：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>f(dx, dy) = (1-u)(1-v)f(i,j) + (1-u)vf(i,j+1) + u(1-v)f(i+1,j) + uvf(i+1,j+1)
</code></pre>
</div>

<p>这里我们就可以由原图中的 4 个像素点推出了目标图中1个像素点，最后遍历目标图，我们就能实现图片的放缩了。</p>

<p>双线性插值算法代码如下所示：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">% Bilinear Function</span>
<span class="k">function</span> <span class="p">[</span> <span class="n">output_img</span> <span class="p">]</span> <span class="o">=</span> <span class="n">scale</span><span class="p">(</span> <span class="n">input_img</span><span class="p">,</span> <span class="n">Size</span> <span class="p">)</span>
    <span class="c1">% Using bilinear algorithm to change the SIZE of input_img.</span>
    <span class="n">dstM</span> <span class="o">=</span> <span class="n">Size</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">dstN</span> <span class="o">=</span> <span class="n">Size</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">[</span><span class="n">srcM</span> <span class="n">srcN</span><span class="p">]</span><span class="o">=</span><span class="nb">size</span><span class="p">(</span><span class="n">input_img</span><span class="p">);</span>
    <span class="n">output_img</span> <span class="o">=</span> <span class="nb">zeros</span><span class="p">(</span><span class="n">dstM</span><span class="p">,</span> <span class="n">dstN</span><span class="p">);</span>
    <span class="k">for</span> <span class="nb">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">dstM</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="nb">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">dstN</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">src_i</span> <span class="o">=</span> <span class="nb">i</span> <span class="o">*</span> <span class="p">(</span><span class="n">srcM</span> <span class="p">/</span> <span class="n">dstM</span><span class="p">);</span>
            <span class="n">src_j</span> <span class="o">=</span> <span class="nb">j</span> <span class="o">*</span> <span class="p">(</span><span class="n">srcN</span> <span class="p">/</span> <span class="n">dstN</span><span class="p">);</span>
            <span class="n">int_i</span> <span class="o">=</span> <span class="nb">fix</span><span class="p">(</span><span class="n">src_i</span><span class="p">);</span>
            <span class="n">int_j</span> <span class="o">=</span> <span class="nb">fix</span><span class="p">(</span><span class="n">src_j</span><span class="p">);</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">src_i</span> <span class="o">-</span> <span class="n">int_i</span><span class="p">;</span>
            <span class="n">v</span> <span class="o">=</span> <span class="n">src_j</span> <span class="o">-</span> <span class="n">int_j</span><span class="p">;</span>
            <span class="k">if</span> <span class="n">int_i</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="n">int_i</span> <span class="o">=</span> <span class="n">int_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">end</span>
            <span class="k">if</span> <span class="n">int_j</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="n">int_j</span> <span class="o">=</span> <span class="n">int_j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">end</span>
            <span class="n">output_img</span><span class="p">(</span><span class="nb">i</span><span class="p">,</span><span class="nb">j</span><span class="p">)</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">*</span><span class="n">input_img</span><span class="p">(</span><span class="n">int_i</span><span class="p">,</span><span class="n">int_j</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span><span class="o">*</span><span class="n">v</span><span class="o">*</span><span class="n">input_img</span><span class="p">(</span><span class="n">int_i</span><span class="p">,</span><span class="n">int_j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                            <span class="o">+</span><span class="n">u</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">*</span><span class="n">input_img</span><span class="p">(</span><span class="n">int_i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">int_j</span><span class="p">)</span><span class="o">+</span><span class="n">u</span><span class="o">*</span><span class="n">v</span><span class="o">*</span><span class="n">input_img</span><span class="p">(</span><span class="n">int_i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">int_j</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="k">end</span>
    <span class="k">end</span>
    <span class="n">output_img</span> <span class="o">=</span> <span class="nb">uint8</span><span class="p">(</span><span class="n">output_img</span><span class="p">);</span>
    <span class="nb">figure</span><span class="p">,</span><span class="n">imshow</span><span class="p">(</span><span class="n">input_img</span><span class="p">)</span>
    <span class="nb">axis</span> <span class="n">on</span>
    <span class="nb">figure</span><span class="p">,</span><span class="n">imshow</span><span class="p">(</span><span class="n">output_img</span><span class="p">)</span>
    <span class="nb">axis</span> <span class="n">on</span>
<span class="k">end</span>

<span class="c1">% call function scale()</span>
<span class="nb">close</span> <span class="nb">all</span>
<span class="nb">clear</span> <span class="nb">all</span>
<span class="nb">clc</span>

<span class="n">input_img</span> <span class="o">=</span> <span class="nb">imread</span><span class="p">(</span><span class="s1">'test.png'</span><span class="p">)</span>
<span class="nb">size</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="n">output_img</span> <span class="o">=</span> <span class="n">scale</span><span class="p">(</span><span class="n">input_img</span><span class="p">,</span> <span class="nb">size</span><span class="p">)</span>
<span class="n">imtool</span><span class="p">(</span><span class="n">output_img</span><span class="p">)</span>
</code></pre>
</div>

      </article>
      <hr class="boundary">
    </div>

    <p class="post-copyright">
      本文的版权归作者
      <a href="http://warpprism.github.io">ZhouJihao</a>
      所有，采用
      <a href="http://creativecommons.org/licenses/by-nc/3.0/">Attribution-NonCommercial 3.0 License</a>。
      任何人可以进行转载、分享，但不可在未经允许的情况下用于商业用途；转载请注明出处。感谢配合！
    </p>


    <h2 class="guest-op">
      <span class="glyphicon glyphicon-share-alt" aria-hidden="true"></span>
      &nbsp;Share This Post
    </h2>

    <div class="ds-share flat" data-thread-key="/tech-post/2015/10/18/双线性插值算法" data-title="关于图像处理中的插值算法（Matlab语言描述）" data-images="http://warpprism.github.io/imgs/show4.jpg" data-content="<p>数字图像处理的第一次作业就是用图像的插值算法实现图片的放缩，在网上查了一些资料后，总结如下：</p>

......" data-url="http://warpprism.github.io/tech-post/2015/10/18/%E5%8F%8C%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95.html">
      <div class="ds-share-inline">
        <ul class="ds-share-icons-16">
          <li data-toggle="ds-share-icons-more">
            <a class="ds-more" href="javascript:void(0);">分享到：</a>
          </li>
          <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
          <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
          <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
          <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>
        </ul>
        <div class="ds-share-icons-more">
        </div>
      </div>
    </div>

    <h2 class="guest-op">
      <span class="glyphicon glyphicon-comment" aria-hidden="true"></span>
      &nbsp;Leave A Comment
    </h2>

    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="/tech-post/2015/10/18/双线性插值算法" data-title="关于图像处理中的插值算法（Matlab语言描述）" data-url="http://warpprism.github.io/tech-post/2015/10/18/%E5%8F%8C%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95.html"></div>
    <!-- 多说评论框 end -->
    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
      var duoshuoQuery = {short_name:"zhoujihao"};
      (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
    </script>
    <!-- 多说公共JS代码 end -->

  </div>

  <!-- Return To Top -->
  <a id="top" href="#">
    <span class="glyphicon glyphicon-chevron-up icon" aria-hidden="true"></span>
    <span class="text">Top</span>
  </a>
</div>

		
<div class="container-fluid" id="footer-div">
    <div class="row">
        <div class="footer1">
            <a href="#" class="foot-item" role="button" data-toggle="modal" data-target=".email-modal">
                <span class="octicon octicon-mail"></span>
                <span>Email@me</span>
            </a>
            |
            <a class="foot-item" href="https://github.com/warpprism" target="_blank">
                <span class="octicon octicon-mark-github"></span>
                <span>My Github</span>
            </a>
            |
            <a class="foot-item" href="https://github.com/WarpPrism/WarpPrism.github.io" target="_blank">
                <span class="octicon octicon-heart"></span>
                <span>Download Theme</span>
            </a>
        </div>
    </div>
    <div class="row">
        <div class="footer2">
            <span>Copyright &copy; ZhouJihao</span>
            |
            <span>Powered By Jekyll</span>
        </div>
    </div>


    <div class="modal fade email-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <b>
                        My Email Address
                    </b>
                </div>
                <div class="modal-body">
                    <b>249662605@qq.com</b>
                </div>
            </div>
        </div>
    </div>
</div>

	</div>
	<script type="text/javascript" src="/lib/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="/lib/bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>


    


</body>
</html>
